Fit2Cloud概念及术语
=====================================

一: 概述
-------------------------------------
1) Fit2Cloud用来做什么?
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
|    Fit2Cloud用来在IaaS中创建和管理运行应用所需的运行环境以及部署和管理应用, 并将这个过程自动化,
| 帮助研发和运维团队实现持续部署，持续交付和自动化运维。
|
|    举个例子，假设我们想要建一个wordpress网站, 需要在阿里云里启动两台虚拟机，一台跑wordpress web，
| 一台跑wordpress mysql, 装web的虚拟机对外开放80端口, 以便能从公网访问。 用纯手工方式做，步骤为:
|    第一步: 到阿里云管理控制台，启动2台虚拟机;
|    第二步: 登录到1台虚拟机, 在其上安装mysql, 并创建wordpress database;
|    第三步: 登录到另一台虚拟机, 在其上安装wordpress web及需要的各种运行时库和apache, 并配置数据库
| 虚拟机的IP及数据库用户名密码到wordpress web虚拟机的数据库连接配置文件里;
|
|    但是放到项目中，要根据需要创建开发,测试,试运行,以及产品环境，也要根据需要升级各个环境里的应用，当应用
| 比较复杂有很多组件时，组件分布在多个虚拟机上时，纯手工以及半自动化方式就不转了，这时我们就需要实现持续部署。
2) Fit2Cloud的基本原理?
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
|    Fit2Cloud的原理就是提供一个平台工具，使得可以定义集群环境的部署计划，通过集群的部署计划可以让Fit2Cloud
| 知道该如何创建一个集群，创建几个虚拟机组，每组包含几个虚拟机，每台虚拟机启动在哪个数据中心，使用哪种硬件
| 配置，装什么操作系统, 以及启动后什么时候执行哪些脚本来安装运行时环境，配置部署启动组件。

二: 集群
-------------------------------------

|    集群就是我们通常所说的环境，我们把用于部署和运行某应用的一组虚拟机叫做一个集群。如果您用过AWS的Opsworks, 
| 等同于OpsWork的Stack。
|
|    举例, 通常对于很多项目，一个应用或系统有不同用途的多个环境，如开发环境，测试环境，试运行环境以及产品环境，
| 每一个环境就是一个集群，由一组虚拟机组成。

三: 虚拟机组
-------------------------------------

|    把集群中相同类型的一组虚拟机叫做一个虚拟机组, 一个虚拟机组定义了虚拟组里虚拟机的:
|    1) 虚拟机数量
|    2) 在哪个数据中心启动 (北京 | 杭州 | 香港 | 青岛)
|    3) 虚机类型         (xsmall | ...)
|    4) 镜像类型 (Ubuntu1204 | CentOS5.8 | CentOS6.5)
|    5) 运行时环境安装配置脚本
|    6) 组件安装配置脚本
|    7) 集群里虚拟机启动或关闭时执行哪些脚本
|
|    Fit2Cloud会根据集群里的各个虚拟机组的定义或设置在指定的数据中心创建指定类型的虚拟机和执行指定的脚本,
| 从而把从环境的创建到组件的部署配置启动过程全部自动化, 中间不需要手工工作。  
|
|  举例, 比如一个wordpress网站, 我们定义其为一个集群wordpress-dev，由两个虚拟机组组成
|  1) 一组是wordpress-web虚拟机组
|       虚拟机数量: 1个
|       虚机类型: 1核1G
|       虚拟机数据中心: 青岛
|       镜像: CentOS6.5
|       安装的软件及组件: apache, php和wordpress web
|  2) 另一组是wordpress-mysql虚拟机组
|   虚拟机数量: 1个
|   虚机类型: 1核1G
|   虚拟机数据中心: 青岛
|   镜像: CentOS6.5
|   安装的软件及组件: mysql, wordpress database, 用户名密码为root/fit2cloud
|
|   当我们启动集群后，Fit2Cloud就会根据集群的定义和配置，在青岛数据中心启动两台1核1G的虚拟机，都装
| CentOS6.5, 一台安装apache,php和wordpress web, 一台安装mysql及创建wordpress database。
| 安装wordpress web那台虚拟机上的wordpress数据库配置文件会被自动配置好，用装mysql的虚拟机的IP,
| 及数据库用户名密码root/fit2cloud。

四: 镜像组 
-------------------------------------

|    镜像组是某种类型操作系统在各个不同数据中心镜像的集合。镜像组用来设置虚拟机组使用的操作系统镜像，当
| 我们设置虚拟机组内虚拟机的地区及操作系统类型后，创建虚拟机的镜像就会被确定, Fit2Cloud就知道创建虚拟
| 机时用阿里云的哪个虚拟机镜像启动虚拟机。
|
|    举例，Fit2Cloud中提供4个默认的镜像组，其中一个是ubuntu-1204-64bit, ubuntu-1204-64bit由
| 北京的Ubuntu1204虚拟机镜像，杭州的Ubuntu1204虚拟机镜像,青岛的Ubuntu1204虚拟机镜像,香港的
| Ubuntu1204虚拟机镜像组成。当我们设定虚拟机组的地区为青岛，操作系统为Ubuntu-1204时，就指定了启动
| 虚拟机时使用青岛的Ubuntu1204虚拟机镜像。

五: 安全组
-------------------------------------

|   就是防火墙端口规则设置, 用于设定虚拟机组中的虚拟机的防火墙，对外开放哪些端口。 
|
|   举例, 为了使外部用户可以用浏览器访问wordpress网站, 我们设置集群里wordpress web类型虚拟机的安
| 全组，对公网打开TCO 80端口。 

六: 虚拟机生命周期事件及事件处理
-------------------------------------

|   虚拟机生命周期事件及处理脚本用于定义虚拟机启动后什么时候在哪些虚拟机上执行哪些脚本，通过这个我们可以
| 安装应用组件需要的运行时环境及部署配置启动组件。
|
|   举例，我们定义wordpress-mysql虚拟组install事件在虚拟机本机执行的脚本为mysql的安装脚本,该脚本
| 安装mysql并设定密码，创建wordpress database, 当wordpress-mysql虚拟机组的虚拟机启动后, 当虚拟机
| 的install事件发生后，Fit2Cloud就会在虚拟机上执行上述的mysql的安装脚本。
|
|   Fit2Cloud定义的虚拟机生命周期事件包括ready, initialize, install, start, rebootComplete,
| postReboot，虚拟机启动后Fit2Cloud会发出虚拟机本机的ready事件，之后会触发虚拟机本机的initialize事件,
| initialize事件对应的脚本在虚拟机上执行结束后，Fit2Cloud会触发install事件，initialize事件对应的
| 脚本在虚拟机上执行结束后, Fit2Cloud会触发start事件，然后start事件对应的脚本在虚拟机上执行。
| 虚机启动后的Lifecycle流程如下: ready->initialize->install->start。
